<!DOCTYPE html>
<html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Python Study" /></head>
<style>@import url(/public/css/syntax/monokai.css);</style>
  <title>Python Study</title>
  <!-- <link href="/public/css/bootstrap.min.css" rel="stylesheet"> -->

  <link href="/public/css/style.css" rel="stylesheet">
  <body>
  	<div class="container"> 
		<div class="sidebar">
			<div class="sidebar-item sidebar-header">
	<div class='sidebar-brand'>
		<a href="/about/">Python Study</a>
	</div>
	<p class="lead">history of python</p></div>

<div class="sidebar-item sidebar-nav">
	<ul class="nav">
      <li class="nav-title">Pages</li>
	  <li>
	  	<a class="nav-item" href="/">Articles</a>
	  </li>
	  
	  
	    
	  
	    
	      
	        <li>
	        	<a class="nav-item" href="/about/">
	            	About
	            </a>
	        </li>
	      
	    
	  
	    
	      
	    
	  
	    
	  
	    
	  
	</ul>
</div>

<div class="sidebar-item sidebar-nav">
  	<ul class="nav">
			<li class="nav-title">Categories</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#sample">
				<span class="name">sample</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#jekyll">
				<span class="name">jekyll</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#update">
				<span class="name">update</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#python">
				<span class="name">python</span>
				<span class="badge">3</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#stock">
				<span class="name">stock</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	  </nav>
	</ul>
</div>

<div class="sidebar-item sidebar-footer">
	<p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a></p>
</div>
		</div>
		<div class="content">
			<article class="post">
	<header class="post-header">
		<div class="post-title"> 
			stock price analysis using RIM
		</div>
		<time class="post-date dt-published" datetime="2020-09-19T19:20:23+09:00" itemprop="datePublished">2020/09/19
		</time>		
	</header>

	<div class="post-content">
		<h2 id="rim-기법-분석">RIM 기법 분석</h2>
<ol>
  <li>RIM 기법을 활용한 기업 주가분석</li>
</ol>

<p>1) kosip100 기업분석</p>

<p>2) 코스피 전종목 분석 (992개)</p>

<ul>
  <li>주가데이터 : FinanceDataReader</li>
  <li>재무제표 : fnguide 크롤링</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="kn">import</span> <span class="nn">FinanceDataReader</span> <span class="k">as</span> <span class="n">fdr</span>


<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">font_manager</span><span class="p">,</span> <span class="n">rc</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="n">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s">'font'</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s">'Gulim'</span><span class="p">)</span> <span class="c1"># 한글폰트 선택
</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</code></pre></div></div>

<ol>
  <li>RIM 계수 입력</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ke</span> <span class="o">=</span> <span class="mf">7.96</span>              <span class="c1"># 할인율 : 신용평가의 BBB- 5년 등급에 해당하 요구수익률
</span><span class="n">w</span> <span class="o">=</span> <span class="mi">1</span>                  <span class="c1"># 지속계수
</span><span class="n">w1</span> <span class="o">=</span> <span class="mf">0.9</span>               <span class="c1"># 지속계수 할인율 10프로
</span><span class="n">w2</span> <span class="o">=</span> <span class="mf">0.8</span>               <span class="c1"># 지속계수 할인율 20프로
</span>
<span class="n">day</span> <span class="o">=</span> <span class="s">'Annual_2019/12'</span>
<span class="n">year</span> <span class="o">=</span> <span class="s">'2018'</span>          <span class="c1"># 현주가 표시시점
</span></code></pre></div></div>

<ol>
  <li>종목 불러오기</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 1) 코스피100 종목 불러오기
</span><span class="n">company_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s">'kospi100_list.xls'</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">company</span> <span class="o">=</span> <span class="n">company_list</span><span class="p">[</span><span class="s">'Symbol'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 2) 코스피 전종목 불러오기 
</span><span class="s">"""
KOSPI_list = fdr.StockListing('KOSPI')
company = KOSPI_list.head(10).dropna()['Symbol']
company
"""</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"\nKOSPI_list = fdr.StockListing('KOSPI')\ncompany = KOSPI_list.head(10).dropna()['Symbol']\ncompany\n"
</code></pre></div></div>

<ol>
  <li>재무제표 불러오기</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">Df</span><span class="p">(</span><span class="n">company</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">url_tmpl</span> <span class="o">=</span> <span class="s">'http://comp.fnguide.com/SVO2/ASP/SVD_Main.asp?pGB=1&amp;gicode=A</span><span class="si">%</span><span class="s">s&amp;cID=&amp;MenuYn=Y&amp;ReportGB=D&amp;NewMenuID=Y&amp;stkGb=701'</span> <span class="c1"># fnguide
</span>        <span class="n">url</span> <span class="o">=</span> <span class="n">url_tmpl</span> <span class="o">%</span> <span class="p">(</span><span class="n">company</span><span class="p">)</span>
        <span class="n">tables</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>
    
    
        <span class="c1">## 1. 재무제표
</span>        <span class="n">df1</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>

        <span class="n">col</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">df1</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="s">'_'</span> <span class="o">+</span><span class="n">b</span>
            <span class="n">col</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">'분류'</span>        
        <span class="n">df1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">col</span>
        <span class="n">df1</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'분류'</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">df1</span>
        
        <span class="c1">## 2. 발행주식수 (일반주 + 우선주) 계산
</span>        <span class="n">df2</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">df2</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">num</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'발행주식수(보통주/ 우선주)'</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">num_temp</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'/ '</span><span class="p">)</span>
        <span class="n">num1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
        <span class="n">num2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_temp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
        <span class="n">enroll_num</span> <span class="o">=</span> <span class="n">num1</span> <span class="o">+</span> <span class="n">num2</span>
        <span class="n">enroll_num</span>
        
        
        <span class="c1">## 3. 자기주식 확인
</span>        <span class="n">df3</span> <span class="o">=</span> <span class="n">tables</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">df3_temp</span> <span class="o">=</span> <span class="n">df3</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'주주구분'</span><span class="p">)</span>
        <span class="n">df3_temp</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">my_stock</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df3_temp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
        <span class="n">my_stock</span>
        
        <span class="n">num_stock</span> <span class="o">=</span> <span class="n">enroll_num</span> <span class="o">-</span> <span class="n">my_stock</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    
    <span class="k">return</span> <span class="n">df1</span><span class="p">,</span> <span class="n">num_stock</span>
</code></pre></div></div>

<ol>
  <li>RIM 계산</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">Rim</span><span class="p">(</span><span class="n">company</span><span class="p">,</span> <span class="n">day</span><span class="p">):</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 자기자본 및 ROE 계산
</span>        <span class="n">asset</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'지배주주지분'</span><span class="p">,</span> <span class="n">day</span><span class="p">]</span>
        <span class="n">roe</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">'ROE'</span><span class="p">,</span> <span class="n">day</span><span class="p">]</span>

        <span class="c1"># 적정주가 계산
</span>        <span class="n">v</span> <span class="o">=</span> <span class="n">asset</span> <span class="o">+</span> <span class="p">(</span><span class="n">asset</span><span class="o">*</span><span class="p">(</span><span class="n">roe</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span><span class="n">w</span><span class="p">)</span>
        <span class="n">fair_price</span> <span class="o">=</span> <span class="n">v</span><span class="o">*</span><span class="mi">100000000</span><span class="o">/</span><span class="n">num_stock</span>

        <span class="k">if</span> <span class="n">roe</span> <span class="o">&gt;=</span> <span class="n">ke</span><span class="p">:</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">asset</span> <span class="o">+</span> <span class="p">(</span><span class="n">asset</span><span class="o">*</span><span class="p">(</span><span class="n">roe</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">w1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span><span class="n">w1</span><span class="p">)</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="n">asset</span> <span class="o">+</span> <span class="p">(</span><span class="n">asset</span><span class="o">*</span><span class="p">(</span><span class="n">roe</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">w2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">ke</span><span class="o">/</span><span class="mi">100</span> <span class="o">-</span><span class="n">w2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">fair_price1</span> <span class="o">=</span> <span class="n">v1</span><span class="o">*</span><span class="mi">100000000</span><span class="o">/</span><span class="n">num_stock</span>
        <span class="n">fair_price2</span> <span class="o">=</span> <span class="n">v2</span><span class="o">*</span><span class="mi">100000000</span><span class="o">/</span><span class="n">num_stock</span>

        <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">'회사코드'</span> <span class="p">:</span> <span class="n">company</span><span class="p">,</span>
                     <span class="s">'회사이름'</span> <span class="p">:</span> <span class="n">company_list</span><span class="p">[</span><span class="n">company_list</span><span class="p">[</span><span class="s">'Symbol'</span><span class="p">]</span> <span class="o">==</span> <span class="n">company</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                     <span class="s">'자기자본'</span> <span class="p">:</span> <span class="n">asset</span><span class="p">,</span>   <span class="c1">#억원
</span>                     <span class="s">'ROE'</span> <span class="p">:</span> <span class="n">roe</span><span class="p">,</span>
                     <span class="s">'기업가치'</span> <span class="p">:</span> <span class="n">v</span><span class="p">,</span>
                     <span class="s">'발행주식수'</span> <span class="p">:</span> <span class="n">num_stock</span><span class="p">,</span>
                     <span class="s">'적정주가'</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">fair_price</span><span class="p">),</span>
                     <span class="s">'할인주가_10'</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">fair_price1</span><span class="p">),</span>
                     <span class="s">'할인주가_20'</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">fair_price2</span><span class="p">)})</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    
    <span class="k">return</span> <span class="n">rows</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rim</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">company</span><span class="p">:</span>    
    <span class="n">df1</span><span class="p">,</span> <span class="n">num_stock</span> <span class="o">=</span> <span class="n">Df</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">Rim</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
    <span class="n">rim1</span> <span class="o">=</span> <span class="n">rim</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>

<span class="n">rim1</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>회사코드</th>
      <th>회사이름</th>
      <th>자기자본</th>
      <th>ROE</th>
      <th>기업가치</th>
      <th>발행주식수</th>
      <th>적정주가</th>
      <th>할인주가_10</th>
      <th>할인주가_20</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>005930</td>
      <td>삼성전자</td>
      <td>2549155.0</td>
      <td>8.69</td>
      <td>2.782934e+06</td>
      <td>6792669250</td>
      <td>40969</td>
      <td>38900</td>
      <td>38311</td>
    </tr>
    <tr>
      <th>1</th>
      <td>000660</td>
      <td>SK하이닉스</td>
      <td>479284.0</td>
      <td>4.25</td>
      <td>2.558991e+05</td>
      <td>728002359</td>
      <td>35150</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>035420</td>
      <td>NAVER</td>
      <td>58052.0</td>
      <td>10.56</td>
      <td>7.701371e+04</td>
      <td>164263384</td>
      <td>46884</td>
      <td>39945</td>
      <td>37969</td>
    </tr>
    <tr>
      <th>3</th>
      <td>051910</td>
      <td>LG화학</td>
      <td>170050.0</td>
      <td>1.84</td>
      <td>3.930804e+04</td>
      <td>78281141</td>
      <td>50213</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>068270</td>
      <td>셀트리온</td>
      <td>27942.0</td>
      <td>11.19</td>
      <td>3.928027e+04</td>
      <td>134993738</td>
      <td>29097</td>
      <td>24049</td>
      <td>22611</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>94</th>
      <td>003410</td>
      <td>쌍용양회</td>
      <td>18025.0</td>
      <td>7.01</td>
      <td>1.587378e+04</td>
      <td>505403280</td>
      <td>3140</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>95</th>
      <td>047050</td>
      <td>포스코인터내셔널</td>
      <td>30477.0</td>
      <td>7.06</td>
      <td>2.703111e+04</td>
      <td>123375149</td>
      <td>21909</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>051600</td>
      <td>한전KPS</td>
      <td>10634.0</td>
      <td>14.98</td>
      <td>2.001223e+04</td>
      <td>45000000</td>
      <td>44471</td>
      <td>31944</td>
      <td>28377</td>
    </tr>
    <tr>
      <th>97</th>
      <td>047040</td>
      <td>대우건설</td>
      <td>24587.0</td>
      <td>8.80</td>
      <td>2.718161e+04</td>
      <td>415622637</td>
      <td>6539</td>
      <td>6164</td>
      <td>6057</td>
    </tr>
    <tr>
      <th>98</th>
      <td>088350</td>
      <td>한화생명</td>
      <td>126859.0</td>
      <td>0.87</td>
      <td>1.386524e+04</td>
      <td>868529987</td>
      <td>1596</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>99 rows × 9 columns</p>
</div>

<ol>
  <li>현재주가 불러오기</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rim2</span> <span class="o">=</span> <span class="n">rim1</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'회사코드'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rim2</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">tmp_price</span> <span class="o">=</span> <span class="n">fdr</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="n">rim2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span> <span class="p">,</span><span class="s">'현주가'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp_price</span>
    
<span class="n">rim2</span><span class="p">[</span><span class="s">'주가차_비'</span><span class="p">]</span>  <span class="o">=</span>  <span class="p">(</span><span class="n">rim2</span><span class="p">[</span><span class="s">'적정주가'</span><span class="p">]</span> <span class="o">-</span> <span class="n">rim2</span><span class="p">[</span><span class="s">'현주가'</span><span class="p">])</span><span class="o">/</span><span class="n">rim2</span><span class="p">[</span><span class="s">'현주가'</span><span class="p">]</span>
<span class="n">rim2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s">'주가차_비'</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="n">rim2</span><span class="p">[</span><span class="n">rim2</span><span class="p">[</span><span class="s">'주가차_비'</span><span class="p">]</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>회사이름</th>
      <th>자기자본</th>
      <th>ROE</th>
      <th>기업가치</th>
      <th>발행주식수</th>
      <th>적정주가</th>
      <th>할인주가_10</th>
      <th>할인주가_20</th>
      <th>현주가</th>
      <th>주가차_비</th>
    </tr>
    <tr>
      <th>회사코드</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>138930</th>
      <td>BNK금융지주</td>
      <td>82837.0</td>
      <td>7.07</td>
      <td>73575.074121</td>
      <td>325935246</td>
      <td>22573</td>
      <td>0</td>
      <td>0</td>
      <td>5140.0</td>
      <td>3.391634</td>
    </tr>
    <tr>
      <th>086790</th>
      <td>하나금융지주</td>
      <td>281245.0</td>
      <td>8.77</td>
      <td>309864.152010</td>
      <td>300242060</td>
      <td>103204</td>
      <td>97474</td>
      <td>95843</td>
      <td>28150.0</td>
      <td>2.666217</td>
    </tr>
    <tr>
      <th>004170</th>
      <td>신세계</td>
      <td>39265.0</td>
      <td>14.24</td>
      <td>70242.914573</td>
      <td>9845181</td>
      <td>713475</td>
      <td>524334</td>
      <td>470487</td>
      <td>215500.0</td>
      <td>2.310789</td>
    </tr>
    <tr>
      <th>055550</th>
      <td>신한지주</td>
      <td>391779.0</td>
      <td>9.09</td>
      <td>447395.868090</td>
      <td>494878835</td>
      <td>90405</td>
      <td>83649</td>
      <td>81726</td>
      <td>28350.0</td>
      <td>2.188889</td>
    </tr>
    <tr>
      <th>024110</th>
      <td>기업은행</td>
      <td>226618.0</td>
      <td>7.36</td>
      <td>209536.241206</td>
      <td>836636680</td>
      <td>25045</td>
      <td>0</td>
      <td>0</td>
      <td>8000.0</td>
      <td>2.130625</td>
    </tr>
    <tr>
      <th>006360</th>
      <td>GS건설</td>
      <td>39747.0</td>
      <td>11.79</td>
      <td>58871.498744</td>
      <td>80097804</td>
      <td>73499</td>
      <td>59147</td>
      <td>55061</td>
      <td>25100.0</td>
      <td>1.928247</td>
    </tr>
    <tr>
      <th>105560</th>
      <td>KB금융</td>
      <td>385339.0</td>
      <td>8.92</td>
      <td>431812.045226</td>
      <td>415807914</td>
      <td>103848</td>
      <td>97130</td>
      <td>95217</td>
      <td>37750.0</td>
      <td>1.750940</td>
    </tr>
    <tr>
      <th>000210</th>
      <td>대림산업</td>
      <td>59373.0</td>
      <td>11.74</td>
      <td>87567.716080</td>
      <td>38600000</td>
      <td>226859</td>
      <td>182952</td>
      <td>170451</td>
      <td>83500.0</td>
      <td>1.716874</td>
    </tr>
    <tr>
      <th>071050</th>
      <td>한국금융지주</td>
      <td>50037.0</td>
      <td>18.14</td>
      <td>114029.042714</td>
      <td>61584238</td>
      <td>185159</td>
      <td>122697</td>
      <td>104915</td>
      <td>78100.0</td>
      <td>1.370794</td>
    </tr>
    <tr>
      <th>078930</th>
      <td>GS</td>
      <td>88778.0</td>
      <td>6.26</td>
      <td>69817.874372</td>
      <td>94700204</td>
      <td>73725</td>
      <td>0</td>
      <td>0</td>
      <td>32800.0</td>
      <td>1.247713</td>
    </tr>
    <tr>
      <th>047040</th>
      <td>대우건설</td>
      <td>24587.0</td>
      <td>8.80</td>
      <td>27181.608040</td>
      <td>415622637</td>
      <td>6539</td>
      <td>6164</td>
      <td>6057</td>
      <td>2925.0</td>
      <td>1.235556</td>
    </tr>
    <tr>
      <th>005940</th>
      <td>NH투자증권</td>
      <td>53851.0</td>
      <td>9.12</td>
      <td>61698.633166</td>
      <td>300279855</td>
      <td>20547</td>
      <td>18976</td>
      <td>18528</td>
      <td>9320.0</td>
      <td>1.204614</td>
    </tr>
    <tr>
      <th>028050</th>
      <td>삼성엔지니어링</td>
      <td>13228.0</td>
      <td>24.61</td>
      <td>40897.120603</td>
      <td>196000000</td>
      <td>20865</td>
      <td>12380</td>
      <td>9964</td>
      <td>11150.0</td>
      <td>0.871300</td>
    </tr>
    <tr>
      <th>069960</th>
      <td>현대백화점</td>
      <td>42420.0</td>
      <td>4.64</td>
      <td>24727.236181</td>
      <td>23402436</td>
      <td>105660</td>
      <td>0</td>
      <td>0</td>
      <td>56800.0</td>
      <td>0.860211</td>
    </tr>
    <tr>
      <th>016360</th>
      <td>삼성증권</td>
      <td>49493.0</td>
      <td>8.15</td>
      <td>50674.365578</td>
      <td>89300000</td>
      <td>56746</td>
      <td>55950</td>
      <td>55724</td>
      <td>31200.0</td>
      <td>0.818782</td>
    </tr>
    <tr>
      <th>001450</th>
      <td>현대해상</td>
      <td>45104.0</td>
      <td>6.23</td>
      <td>35301.246231</td>
      <td>89399989</td>
      <td>39486</td>
      <td>0</td>
      <td>0</td>
      <td>22850.0</td>
      <td>0.728053</td>
    </tr>
    <tr>
      <th>081660</th>
      <td>휠라홀딩스</td>
      <td>12497.0</td>
      <td>23.81</td>
      <td>37381.101759</td>
      <td>60752222</td>
      <td>61530</td>
      <td>36908</td>
      <td>29899</td>
      <td>37000.0</td>
      <td>0.662973</td>
    </tr>
    <tr>
      <th>051600</th>
      <td>한전KPS</td>
      <td>10634.0</td>
      <td>14.98</td>
      <td>20012.226131</td>
      <td>45000000</td>
      <td>44471</td>
      <td>31944</td>
      <td>28377</td>
      <td>28000.0</td>
      <td>0.588250</td>
    </tr>
    <tr>
      <th>047050</th>
      <td>포스코인터내셔널</td>
      <td>30477.0</td>
      <td>7.06</td>
      <td>27031.108040</td>
      <td>123375149</td>
      <td>21909</td>
      <td>0</td>
      <td>0</td>
      <td>13850.0</td>
      <td>0.581877</td>
    </tr>
    <tr>
      <th>005830</th>
      <td>DB손해보험</td>
      <td>59490.0</td>
      <td>6.84</td>
      <td>51119.547739</td>
      <td>70799985</td>
      <td>72202</td>
      <td>0</td>
      <td>0</td>
      <td>45700.0</td>
      <td>0.579912</td>
    </tr>
    <tr>
      <th>000720</th>
      <td>현대건설</td>
      <td>66626.0</td>
      <td>6.30</td>
      <td>52731.633166</td>
      <td>111454621</td>
      <td>47312</td>
      <td>0</td>
      <td>0</td>
      <td>32100.0</td>
      <td>0.473894</td>
    </tr>
    <tr>
      <th>005490</th>
      <td>POSCO</td>
      <td>444719.0</td>
      <td>4.18</td>
      <td>233533.344221</td>
      <td>87186826</td>
      <td>267853</td>
      <td>0</td>
      <td>0</td>
      <td>192000.0</td>
      <td>0.395068</td>
    </tr>
    <tr>
      <th>029780</th>
      <td>삼성카드</td>
      <td>68964.0</td>
      <td>5.04</td>
      <td>43665.648241</td>
      <td>115858884</td>
      <td>37688</td>
      <td>0</td>
      <td>0</td>
      <td>28900.0</td>
      <td>0.304083</td>
    </tr>
    <tr>
      <th>012330</th>
      <td>현대모비스</td>
      <td>323300.0</td>
      <td>7.28</td>
      <td>295681.407035</td>
      <td>95058667</td>
      <td>311051</td>
      <td>0</td>
      <td>0</td>
      <td>240000.0</td>
      <td>0.296046</td>
    </tr>
    <tr>
      <th>030200</th>
      <td>KT</td>
      <td>136668.0</td>
      <td>4.61</td>
      <td>79150.688442</td>
      <td>261111802</td>
      <td>30312</td>
      <td>0</td>
      <td>0</td>
      <td>23400.0</td>
      <td>0.295385</td>
    </tr>
    <tr>
      <th>241560</th>
      <td>두산밥캣</td>
      <td>39791.0</td>
      <td>7.05</td>
      <td>35242.028894</td>
      <td>100249166</td>
      <td>35154</td>
      <td>0</td>
      <td>0</td>
      <td>27250.0</td>
      <td>0.290055</td>
    </tr>
    <tr>
      <th>011170</th>
      <td>롯데케미칼</td>
      <td>132044.0</td>
      <td>5.51</td>
      <td>91402.316583</td>
      <td>34275419</td>
      <td>266670</td>
      <td>0</td>
      <td>0</td>
      <td>209500.0</td>
      <td>0.272888</td>
    </tr>
    <tr>
      <th>161390</th>
      <td>한국타이어앤테크놀로</td>
      <td>71568.0</td>
      <td>6.03</td>
      <td>54215.457286</td>
      <td>123875068</td>
      <td>43766</td>
      <td>0</td>
      <td>0</td>
      <td>34400.0</td>
      <td>0.272267</td>
    </tr>
    <tr>
      <th>000270</th>
      <td>기아차</td>
      <td>289781.0</td>
      <td>6.50</td>
      <td>236630.213568</td>
      <td>405363346</td>
      <td>58374</td>
      <td>0</td>
      <td>0</td>
      <td>47800.0</td>
      <td>0.221213</td>
    </tr>
    <tr>
      <th>086280</th>
      <td>현대글로비스</td>
      <td>46703.0</td>
      <td>11.25</td>
      <td>66006.124372</td>
      <td>37500000</td>
      <td>176016</td>
      <td>145074</td>
      <td>136264</td>
      <td>147500.0</td>
      <td>0.193329</td>
    </tr>
    <tr>
      <th>033780</th>
      <td>KT&amp;G</td>
      <td>86506.0</td>
      <td>12.39</td>
      <td>134649.414573</td>
      <td>137292488</td>
      <td>98074</td>
      <td>76996</td>
      <td>70995</td>
      <td>83100.0</td>
      <td>0.180193</td>
    </tr>
    <tr>
      <th>006800</th>
      <td>미래에셋대우</td>
      <td>91278.0</td>
      <td>7.56</td>
      <td>86691.165829</td>
      <td>799392137</td>
      <td>10844</td>
      <td>0</td>
      <td>0</td>
      <td>9200.0</td>
      <td>0.178696</td>
    </tr>
    <tr>
      <th>001040</th>
      <td>CJ</td>
      <td>45096.0</td>
      <td>6.24</td>
      <td>35351.638191</td>
      <td>35663726</td>
      <td>99124</td>
      <td>0</td>
      <td>0</td>
      <td>85800.0</td>
      <td>0.155291</td>
    </tr>
    <tr>
      <th>011780</th>
      <td>금호석유</td>
      <td>26286.0</td>
      <td>11.84</td>
      <td>39098.773869</td>
      <td>33491159</td>
      <td>116743</td>
      <td>93746</td>
      <td>87199</td>
      <td>102000.0</td>
      <td>0.144539</td>
    </tr>
    <tr>
      <th>010130</th>
      <td>고려아연</td>
      <td>67154.0</td>
      <td>9.76</td>
      <td>82339.577889</td>
      <td>18869994</td>
      <td>436351</td>
      <td>387977</td>
      <td>374205</td>
      <td>392000.0</td>
      <td>0.113140</td>
    </tr>
    <tr>
      <th>032640</th>
      <td>LG유플러스</td>
      <td>70809.0</td>
      <td>6.30</td>
      <td>56042.298995</td>
      <td>436611361</td>
      <td>12835</td>
      <td>0</td>
      <td>0</td>
      <td>11700.0</td>
      <td>0.097009</td>
    </tr>
    <tr>
      <th>032830</th>
      <td>삼성생명</td>
      <td>356670.0</td>
      <td>3.03</td>
      <td>135767.600503</td>
      <td>199999990</td>
      <td>67883</td>
      <td>0</td>
      <td>0</td>
      <td>62900.0</td>
      <td>0.079221</td>
    </tr>
    <tr>
      <th>088350</th>
      <td>한화생명</td>
      <td>126859.0</td>
      <td>0.87</td>
      <td>13865.242462</td>
      <td>868529987</td>
      <td>1596</td>
      <td>0</td>
      <td>0</td>
      <td>1565.0</td>
      <td>0.019808</td>
    </tr>
    <tr>
      <th>003550</th>
      <td>LG</td>
      <td>188270.0</td>
      <td>5.87</td>
      <td>138837.298995</td>
      <td>175871808</td>
      <td>78942</td>
      <td>0</td>
      <td>0</td>
      <td>78900.0</td>
      <td>0.000532</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">price</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rim2</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
    <span class="n">tmp_stock_price</span> <span class="o">=</span> <span class="n">fdr</span><span class="o">.</span><span class="n">DataReader</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
    <span class="n">price</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp_stock_price</span><span class="p">[</span><span class="s">'Close'</span><span class="p">]</span>

</code></pre></div></div>

<ol>
  <li>특정조건 그래프 그리기</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rim3</span> <span class="o">=</span> <span class="n">rim2</span><span class="p">[(</span><span class="n">rim2</span><span class="p">[</span><span class="s">'주가차_비'</span><span class="p">]</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">)]</span>
<span class="n">rim3</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>회사이름</th>
      <th>자기자본</th>
      <th>ROE</th>
      <th>기업가치</th>
      <th>발행주식수</th>
      <th>적정주가</th>
      <th>할인주가_10</th>
      <th>할인주가_20</th>
      <th>현주가</th>
      <th>주가차_비</th>
    </tr>
    <tr>
      <th>회사코드</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>138930</th>
      <td>BNK금융지주</td>
      <td>82837.0</td>
      <td>7.07</td>
      <td>73575.074121</td>
      <td>325935246</td>
      <td>22573</td>
      <td>0</td>
      <td>0</td>
      <td>5140.0</td>
      <td>3.391634</td>
    </tr>
    <tr>
      <th>086790</th>
      <td>하나금융지주</td>
      <td>281245.0</td>
      <td>8.77</td>
      <td>309864.152010</td>
      <td>300242060</td>
      <td>103204</td>
      <td>97474</td>
      <td>95843</td>
      <td>28150.0</td>
      <td>2.666217</td>
    </tr>
    <tr>
      <th>004170</th>
      <td>신세계</td>
      <td>39265.0</td>
      <td>14.24</td>
      <td>70242.914573</td>
      <td>9845181</td>
      <td>713475</td>
      <td>524334</td>
      <td>470487</td>
      <td>215500.0</td>
      <td>2.310789</td>
    </tr>
    <tr>
      <th>055550</th>
      <td>신한지주</td>
      <td>391779.0</td>
      <td>9.09</td>
      <td>447395.868090</td>
      <td>494878835</td>
      <td>90405</td>
      <td>83649</td>
      <td>81726</td>
      <td>28350.0</td>
      <td>2.188889</td>
    </tr>
    <tr>
      <th>024110</th>
      <td>기업은행</td>
      <td>226618.0</td>
      <td>7.36</td>
      <td>209536.241206</td>
      <td>836636680</td>
      <td>25045</td>
      <td>0</td>
      <td>0</td>
      <td>8000.0</td>
      <td>2.130625</td>
    </tr>
    <tr>
      <th>006360</th>
      <td>GS건설</td>
      <td>39747.0</td>
      <td>11.79</td>
      <td>58871.498744</td>
      <td>80097804</td>
      <td>73499</td>
      <td>59147</td>
      <td>55061</td>
      <td>25100.0</td>
      <td>1.928247</td>
    </tr>
    <tr>
      <th>105560</th>
      <td>KB금융</td>
      <td>385339.0</td>
      <td>8.92</td>
      <td>431812.045226</td>
      <td>415807914</td>
      <td>103848</td>
      <td>97130</td>
      <td>95217</td>
      <td>37750.0</td>
      <td>1.750940</td>
    </tr>
    <tr>
      <th>000210</th>
      <td>대림산업</td>
      <td>59373.0</td>
      <td>11.74</td>
      <td>87567.716080</td>
      <td>38600000</td>
      <td>226859</td>
      <td>182952</td>
      <td>170451</td>
      <td>83500.0</td>
      <td>1.716874</td>
    </tr>
    <tr>
      <th>071050</th>
      <td>한국금융지주</td>
      <td>50037.0</td>
      <td>18.14</td>
      <td>114029.042714</td>
      <td>61584238</td>
      <td>185159</td>
      <td>122697</td>
      <td>104915</td>
      <td>78100.0</td>
      <td>1.370794</td>
    </tr>
    <tr>
      <th>078930</th>
      <td>GS</td>
      <td>88778.0</td>
      <td>6.26</td>
      <td>69817.874372</td>
      <td>94700204</td>
      <td>73725</td>
      <td>0</td>
      <td>0</td>
      <td>32800.0</td>
      <td>1.247713</td>
    </tr>
    <tr>
      <th>047040</th>
      <td>대우건설</td>
      <td>24587.0</td>
      <td>8.80</td>
      <td>27181.608040</td>
      <td>415622637</td>
      <td>6539</td>
      <td>6164</td>
      <td>6057</td>
      <td>2925.0</td>
      <td>1.235556</td>
    </tr>
    <tr>
      <th>005940</th>
      <td>NH투자증권</td>
      <td>53851.0</td>
      <td>9.12</td>
      <td>61698.633166</td>
      <td>300279855</td>
      <td>20547</td>
      <td>18976</td>
      <td>18528</td>
      <td>9320.0</td>
      <td>1.204614</td>
    </tr>
    <tr>
      <th>028050</th>
      <td>삼성엔지니어링</td>
      <td>13228.0</td>
      <td>24.61</td>
      <td>40897.120603</td>
      <td>196000000</td>
      <td>20865</td>
      <td>12380</td>
      <td>9964</td>
      <td>11150.0</td>
      <td>0.871300</td>
    </tr>
    <tr>
      <th>069960</th>
      <td>현대백화점</td>
      <td>42420.0</td>
      <td>4.64</td>
      <td>24727.236181</td>
      <td>23402436</td>
      <td>105660</td>
      <td>0</td>
      <td>0</td>
      <td>56800.0</td>
      <td>0.860211</td>
    </tr>
    <tr>
      <th>016360</th>
      <td>삼성증권</td>
      <td>49493.0</td>
      <td>8.15</td>
      <td>50674.365578</td>
      <td>89300000</td>
      <td>56746</td>
      <td>55950</td>
      <td>55724</td>
      <td>31200.0</td>
      <td>0.818782</td>
    </tr>
    <tr>
      <th>001450</th>
      <td>현대해상</td>
      <td>45104.0</td>
      <td>6.23</td>
      <td>35301.246231</td>
      <td>89399989</td>
      <td>39486</td>
      <td>0</td>
      <td>0</td>
      <td>22850.0</td>
      <td>0.728053</td>
    </tr>
    <tr>
      <th>081660</th>
      <td>휠라홀딩스</td>
      <td>12497.0</td>
      <td>23.81</td>
      <td>37381.101759</td>
      <td>60752222</td>
      <td>61530</td>
      <td>36908</td>
      <td>29899</td>
      <td>37000.0</td>
      <td>0.662973</td>
    </tr>
    <tr>
      <th>051600</th>
      <td>한전KPS</td>
      <td>10634.0</td>
      <td>14.98</td>
      <td>20012.226131</td>
      <td>45000000</td>
      <td>44471</td>
      <td>31944</td>
      <td>28377</td>
      <td>28000.0</td>
      <td>0.588250</td>
    </tr>
    <tr>
      <th>047050</th>
      <td>포스코인터내셔널</td>
      <td>30477.0</td>
      <td>7.06</td>
      <td>27031.108040</td>
      <td>123375149</td>
      <td>21909</td>
      <td>0</td>
      <td>0</td>
      <td>13850.0</td>
      <td>0.581877</td>
    </tr>
    <tr>
      <th>005830</th>
      <td>DB손해보험</td>
      <td>59490.0</td>
      <td>6.84</td>
      <td>51119.547739</td>
      <td>70799985</td>
      <td>72202</td>
      <td>0</td>
      <td>0</td>
      <td>45700.0</td>
      <td>0.579912</td>
    </tr>
    <tr>
      <th>000720</th>
      <td>현대건설</td>
      <td>66626.0</td>
      <td>6.30</td>
      <td>52731.633166</td>
      <td>111454621</td>
      <td>47312</td>
      <td>0</td>
      <td>0</td>
      <td>32100.0</td>
      <td>0.473894</td>
    </tr>
    <tr>
      <th>005490</th>
      <td>POSCO</td>
      <td>444719.0</td>
      <td>4.18</td>
      <td>233533.344221</td>
      <td>87186826</td>
      <td>267853</td>
      <td>0</td>
      <td>0</td>
      <td>192000.0</td>
      <td>0.395068</td>
    </tr>
    <tr>
      <th>029780</th>
      <td>삼성카드</td>
      <td>68964.0</td>
      <td>5.04</td>
      <td>43665.648241</td>
      <td>115858884</td>
      <td>37688</td>
      <td>0</td>
      <td>0</td>
      <td>28900.0</td>
      <td>0.304083</td>
    </tr>
    <tr>
      <th>012330</th>
      <td>현대모비스</td>
      <td>323300.0</td>
      <td>7.28</td>
      <td>295681.407035</td>
      <td>95058667</td>
      <td>311051</td>
      <td>0</td>
      <td>0</td>
      <td>240000.0</td>
      <td>0.296046</td>
    </tr>
    <tr>
      <th>030200</th>
      <td>KT</td>
      <td>136668.0</td>
      <td>4.61</td>
      <td>79150.688442</td>
      <td>261111802</td>
      <td>30312</td>
      <td>0</td>
      <td>0</td>
      <td>23400.0</td>
      <td>0.295385</td>
    </tr>
    <tr>
      <th>241560</th>
      <td>두산밥캣</td>
      <td>39791.0</td>
      <td>7.05</td>
      <td>35242.028894</td>
      <td>100249166</td>
      <td>35154</td>
      <td>0</td>
      <td>0</td>
      <td>27250.0</td>
      <td>0.290055</td>
    </tr>
    <tr>
      <th>011170</th>
      <td>롯데케미칼</td>
      <td>132044.0</td>
      <td>5.51</td>
      <td>91402.316583</td>
      <td>34275419</td>
      <td>266670</td>
      <td>0</td>
      <td>0</td>
      <td>209500.0</td>
      <td>0.272888</td>
    </tr>
    <tr>
      <th>161390</th>
      <td>한국타이어앤테크놀로</td>
      <td>71568.0</td>
      <td>6.03</td>
      <td>54215.457286</td>
      <td>123875068</td>
      <td>43766</td>
      <td>0</td>
      <td>0</td>
      <td>34400.0</td>
      <td>0.272267</td>
    </tr>
    <tr>
      <th>000270</th>
      <td>기아차</td>
      <td>289781.0</td>
      <td>6.50</td>
      <td>236630.213568</td>
      <td>405363346</td>
      <td>58374</td>
      <td>0</td>
      <td>0</td>
      <td>47800.0</td>
      <td>0.221213</td>
    </tr>
    <tr>
      <th>086280</th>
      <td>현대글로비스</td>
      <td>46703.0</td>
      <td>11.25</td>
      <td>66006.124372</td>
      <td>37500000</td>
      <td>176016</td>
      <td>145074</td>
      <td>136264</td>
      <td>147500.0</td>
      <td>0.193329</td>
    </tr>
    <tr>
      <th>033780</th>
      <td>KT&amp;G</td>
      <td>86506.0</td>
      <td>12.39</td>
      <td>134649.414573</td>
      <td>137292488</td>
      <td>98074</td>
      <td>76996</td>
      <td>70995</td>
      <td>83100.0</td>
      <td>0.180193</td>
    </tr>
    <tr>
      <th>006800</th>
      <td>미래에셋대우</td>
      <td>91278.0</td>
      <td>7.56</td>
      <td>86691.165829</td>
      <td>799392137</td>
      <td>10844</td>
      <td>0</td>
      <td>0</td>
      <td>9200.0</td>
      <td>0.178696</td>
    </tr>
    <tr>
      <th>001040</th>
      <td>CJ</td>
      <td>45096.0</td>
      <td>6.24</td>
      <td>35351.638191</td>
      <td>35663726</td>
      <td>99124</td>
      <td>0</td>
      <td>0</td>
      <td>85800.0</td>
      <td>0.155291</td>
    </tr>
    <tr>
      <th>011780</th>
      <td>금호석유</td>
      <td>26286.0</td>
      <td>11.84</td>
      <td>39098.773869</td>
      <td>33491159</td>
      <td>116743</td>
      <td>93746</td>
      <td>87199</td>
      <td>102000.0</td>
      <td>0.144539</td>
    </tr>
    <tr>
      <th>010130</th>
      <td>고려아연</td>
      <td>67154.0</td>
      <td>9.76</td>
      <td>82339.577889</td>
      <td>18869994</td>
      <td>436351</td>
      <td>387977</td>
      <td>374205</td>
      <td>392000.0</td>
      <td>0.113140</td>
    </tr>
    <tr>
      <th>032640</th>
      <td>LG유플러스</td>
      <td>70809.0</td>
      <td>6.30</td>
      <td>56042.298995</td>
      <td>436611361</td>
      <td>12835</td>
      <td>0</td>
      <td>0</td>
      <td>11700.0</td>
      <td>0.097009</td>
    </tr>
    <tr>
      <th>032830</th>
      <td>삼성생명</td>
      <td>356670.0</td>
      <td>3.03</td>
      <td>135767.600503</td>
      <td>199999990</td>
      <td>67883</td>
      <td>0</td>
      <td>0</td>
      <td>62900.0</td>
      <td>0.079221</td>
    </tr>
    <tr>
      <th>088350</th>
      <td>한화생명</td>
      <td>126859.0</td>
      <td>0.87</td>
      <td>13865.242462</td>
      <td>868529987</td>
      <td>1596</td>
      <td>0</td>
      <td>0</td>
      <td>1565.0</td>
      <td>0.019808</td>
    </tr>
    <tr>
      <th>003550</th>
      <td>LG</td>
      <td>188270.0</td>
      <td>5.87</td>
      <td>138837.298995</td>
      <td>175871808</td>
      <td>78942</td>
      <td>0</td>
      <td>0</td>
      <td>78900.0</td>
      <td>0.000532</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="n">rim3</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">num</span><span class="p">))</span> 

<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rim3</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">num</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">price</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">rim3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s">'적정주가'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s">'b'</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">':'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'적정주가'</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">rim3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s">'할인주가_10'</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">rim3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s">'할인주가_10'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s">'#8c8aff'</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">':'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'할인주가_10'</span><span class="p">)</span>  
        <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">rim3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s">'할인주가_20'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s">'#d2d1ff'</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">':'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'할인주가_20'</span><span class="p">)</span>  
                
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">company_list</span><span class="p">[</span><span class="n">company_list</span><span class="p">[</span><span class="s">'Symbol'</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></div>

<p><img src="/public/img/2020-09-19-Rim_200906_17_0.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

	</div>
</article>
		</div>
	</div>
  </body>
</html>